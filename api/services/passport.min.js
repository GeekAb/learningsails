function findById(e,t){User.findOne(e).exec(function(e,i){return e?t(null,null):t(null,i)})}function findByUsername(e,t){User.findOne({username:e}).exec(function(e,i){return e?t(null,null):t(null,i)})}var passport=require("passport"),LocalStrategy=require("passport-local").Strategy,bcrypt=require("bcrypt-nodejs");passport.serializeUser(function(e,t){t(null,e.id)}),passport.deserializeUser(function(e,t){findById(e,function(e,i){t(e,i)})}),passport.use(new LocalStrategy(function(e,t,i){process.nextTick(function(){findByUsername(e,function(n,o){return n?i(null,n):o?void bcrypt.compare(t,o.password,function(e,t){if(!t)return i(null,!1,{message:"Invalid Password"});var n={username:o.username,createdAt:o.createdAt,id:o.id};return i(null,n,{message:"Logged In Successfully"})}):i(null,!1,{message:"Unknown user "+e})})})}));